# Deploying the app
NeedForHeat is published to the Apple App Store and Google Play Store App Store on the Windesheim account.

For access to either of those developer accounts, please contact [@n-vr](https://github.com/n-vr) or [@henriterhofte](https://github.com/henriterhofte).

## General information
Using GitHub Actions, the app is automatically built when merging a new version to the `main` branch. This is done using the `expo build` command, which you don't have to run yourself. The build is then uploaded to the @nfh organization on Expo.

For more information on the workflows, check out the [GitHub documentation of the project](./github.md).

> **Note** 
> App signing is handled by Expo, so you don't have to worry about that.

## Apple App Store
The App Store is updated using the Expo CLI. This is done using the following command (execute in the `apps/expo` directory & requires `expo-cli` to be installed):

```bash
eas submit -p ios --profile production
```

This will ask you to log in to the Expo account. After logging in, select the option 'Select a build from EAS' and select the most recent EAS build. This build will be submitted to the App Store. This can take a while.

When this is done, you can check the status of the submission in the [App Store Connect dashboard](https://appstoreconnect.apple.com/apps/1563201993/testflight/ios). This is where you can release the build to TestFlight users and App Store users.

At the time of writing, the build cannot be automatically submitted to the App Store, since there is no App Store Connect API key available. \
You'll have to use an app password, which can be generated in the [Apple ID settings](https://appleid.apple.com/account/manage).

## Google Play Store
The Play Store is updated using the Google Play Console. This is done using the following steps:

1. Download the `.aab` file that was generated by the worklow: [EAS NFH Project](https://expo.dev/accounts/nfh/projects/need-for-heat/builds).
2. Go to the [Google Play Console](https://play.google.com/console/u/1/developers/5055222802254203943/app/4974472724605082468/tracks/4697332311993456944/create/) and upload the `.aab` file you've just downloaded.
3. Fill in the release version name & notes (for each language) and click `Save`.
4. Click `Review` and then `Start rollout to production`.
